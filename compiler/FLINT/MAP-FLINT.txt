compiler/FLINT/MAP-FL.txt

Map of FLINT (as a "library")

* Excluding use of modules from Basis (basis.cm) and smlnj-lib/Util (smlnj-lib.cm)
* Imports from outside the FLINT library are indicated by an asterisk (e.g. LambdaVar*)
  [We assume import of basis.cm and smlnj-lib.cm.]
* All-caps identifiers are assumed to be signatures. Initial caps identifiers are assumed
  to be structures, unless they end in "Fn", in which case they are assumed to be functors.
  These defaults can be overridden by qualifiers, e.g. "CPS [str]".

FLINT/flint.cm -- the CPS Group/Library CDF

(* ---------------------------- Exports ---------------------------- *)

  structure TransUtil
  structure Translate
  structure Lty
  structure LtyKindChk
  structure LtyKernel
  structure LtyDef
  structure LtyExtern
  structure PrimTyc
  structure PPLty
  structure PPFlint
  structure LContract
  structure Specialize
  structure LambdaVar
  structure ChkFlint
  structure FLINTOpt
  signature FLINT
  structure FLINT


(* ---------------------------- Members ---------------------------- *)

FLINT/

FLINT/main/

  flint-opt.sml
    < FLINTOpt
    > Stats*          Basics/stats/stats.sml
      ErrorMsg*       Basics/errormsg/errormsg.sml

      FLINT           FLINT/flint/flint.sml
      FLINT_Control   FLINT/main/control.sml [Admin/control/flint-control.sml]
      PPFlint         FLINT/flint/ppflint.sml
      LtyBasic        FLINT/kernel/ltybasic.sml
      LtyExtern       FLINT/kernel/ltyextern.sml
      Control         TopLevel/main/control.sml [Admin/control/control.sml]
      LContract       FLINT/opt/lcontract.sml
      FContract       FLINT/opt/fcontract.sml
      Loopify         FLINT/opt/loopify.sml
      FixFix	      FLINT/opt/fixfix.sml
      Lift	      FLINT/opt/lift.sml
      Specialize      FLINT/opt/specialize.sml
      Recover         FLINT/opt/recover.sml
      Wrapping        FLINT/reps/wrapping.sml
      Reify           FLINT/reps/reify.sml
      TvarCvt         FLINT/flint/tvarcvt.sml
      ChkFlint        FLINT/flint/chkflint.sml
      PPLty           FLINT/flint/ppflint.sml

    Note: FLINT_Control.recover must be moved; it's not in FLINTControl.

  control.sig
    < FLINTCONTROL
    > LambdaVar*        ElabData/basics/lambdavar.sml

  control.sml
    < FLINT_Control     [-> Admin/control/flint-control.sml?]
    > BasicControl*     Basics/control/basiccontrol.sml
      LambdaVar*        ElabData/basics/lambdavar.sml

      Controls*         [smlnj-lib/]Controls/controls.sml
      ControlRegistry*  [smlnj-lib/]Controls/control-registry.sml
      ControlUtil*      [smlnj-lib/]Controls/control-unit.sml 

FLINT/plambda/

  chkplexp.sml
    < CHKPLEXP
      ChkPlexp
    > LambdaVar*      ElabData/basics/lambdavar.sml
      Formatting*     smlnj-lib/PrettyPrint/src/formatting.sml
      PrintFormat*    smlnj-lib/PrettyPrint/src/printformat.sml

      Lty	      FLINT/kernel/lty.sml
      LtyDef	      FLINT/kernel/ltydef.sml
      LtyBasic	      FLINT/kernel/ltybasic.sml
      LtyKernel       FLINT/kernel/ltykernel.sml
      LtyExtern       FLINT/kernel/ltyextern.sml
      LtyKindChk      FLINT/kernel/ltykindchk.sml
      PPLty	      FLINT/kernel/pplty.sml
      PLambda         FLINT/plambda/plambda.sml
      PPLexp          FLINT/plambda/pplexp.sml

  flintnm.sml
    < FLINTNM
      FlintNM
    > LambdaVar*      ElabData/basics/lambdavar.sml
      BasicTypes*     ElabData/types/basictypes.sml
      Primop*         ElabData/prim/primop.sml

      Lty	      FLINT/kernel/lty.sml
      LtyDef	      FLINT/kernel/ltydef.sml
      LtyBasic	      FLINT/kernel/ltybasic.sml
      LtyKernel       FLINT/kernel/ltykernel.sml
      LtyExtern       FLINT/kernel/ltyextern.sml
      FunRecMeta      FLINT/kernel/funrecmeta.sml
      PLambda         FLINT/plambda/plambda.sml
      PFlatten	      FLINT/plambda/pflatten.sml
      FLINT	      FLINT/flint/flint.sml
      FlintUtil	      FLINT/flint/flintutil.sml

  pflatten.sig
    < PFLATTEN
    > LambdaVar*      ElabData/basics/lambdavar.sml

      FLINT [str]     FLINT/flint/flint.sml
      Lty             FLINT/kernel/lty.sml

  pflatten.sml
    < PFlatten
    > LambdaVar*      ElabData/basics/lambdavar.sml
      Control*        TopLevel/main/control.sml
      ErrorMsg*	      Basics/errormsg/errormsg.sml

      Lty	      FLINT/kernel/lty.sml
      LtyDef	      FLINT/kernel/ltydef.sml
      LtyKernel       FLINT/kernel/ltykernel.sml
      FLINT	      FLINT/flint/flint.sml
      FlintUtil	      FLINT/flint/flintutil.sml

  plambda.sig
    < PLAMBDA
    > Symbol*	      Basics/symbol/symbol.sml
      Access*         ElabData/basics/access.sml
      LambdaVar*      ElabData/basics/lambdavar.sml
      IntConst*	      Basics/compiler/int-const.sml
      RealConst*      Basics/compiler/real-const.sml
      Primop*	      ElabData/prim/primop.sml

      Lty	      FLINT/kernel/lty.sml

  plambda.sml
    < PLambda
    > Symbol*	      Basics/symbol/symbol.sml
      Access*         ElabData/basics/access.sml
      LambdaVar*      ElabData/basics/lambdavar.sml
      IntConst*	      Basics/compiler/int-const.sml
      RealConst*      Basics/compiler/real-const.sml
      Primop*	      ElabData/prim/primop.sml

      Lty	      FLINT/kernel/lty.sml

  pplexp.sml
    < PPLEXP
      PPLexp
    > Symbol*	      Basics/symbol/symbol.sml
      Access*         ElabData/basics/access.sml
      LambdaVar*      ElabData/basics/lambdavar.sml
      StringFormats*  Basics/print/stringformats.sml

      Formatting*     smlnj-lib/PrettyPrint/src/formatting.sml
      PrintFormat*    smlnj-lib/PrettyPrint/src/printformat.sml

      PLambda	      FLINT/plambda/plambda.sml
      PPLty	      FLINT/kernel/pplty.sml

  reorder.sml	      [***Reorder body commented out***]
    < REORDER
      Reorder
    > Access*         ElabData/basics/access.sml
      Primop*	      ElabData/prim/primop.sml

      PLambda	      FLINT/plambda/plambda.sml


FLINT/trans/
  module-plists.sml
    < ModulePropLists
    > Modules*	      ElabData/modules/modules.sml
      Types*	      ElabData/types/types.sml

      PropList*       smlnj-lib/Util/plists.sml


  transtkind.sml
    < TransTKind
    > TKind*	      ElabData/basics/tkind.sml

      LtyDef	      FLINE/kernel/ltydef.sml

  pequal.sml
    < PEQUAL
      PEqual
    > Access*         ElabData/basics/access.sml
      Types*	      ElabData/types/types.sml
      TypesUtil*      ElabData/types/typesutil.sml

  transutil.sml
    < TransUtil
    > LambdaVar*      ElabData/basics/lambdavar.sml
      Access*         ElabData/basics/access.sml
      Variable*	      ElabData/syntax/variable.sml
      TypesUtil*      ElabData/types/typesutil.sml
      BasicTypes*     ElabData/types/basictypes.sml
      StaticEnv*      ElabData/statenv/statenv.sml
      Primop*	      ElabData/prim/primop.sml
      PrimopUtil*     ElabData/prim/primop-util.sml
      ElabDebug*      Elaborator/elaborate/elabdebug.sml

      PLambda	      FLINT/plambda/plambda.sml
      Lty	      FLINT/kernel/lty.sml
      LtyDef	      FLINT/kernel/ltydef.sml
      LtyBasic	      FLINT/kernel/ltybasic.sml

  translate.sml
    < TRANSLATE
      Translate
    > SourceMap*      Basics/source/sourcemap.sml
      ErrorMsg*	      Basics/errormsg/errormsg.sml
      Target*	      Basics/compiler/target[32,64].sml
      Symbol*	      Basics/symbol/symbol.sml
      SymPath*	      ElabData/basics/sympaths.sml
      PPSymPaths*     ElabData/basics/ppsympaths.sml
      Access*         ElabData/basics/access.sml
      LambdaVar*      ElabData/basics/lambdavar.sml 
      Variable*	      ElabData/syntax/variable.sml
      Absyn*	      ElabData/syntax/absyn.sml
      AbsynUtil*      ElabData/syntax/absynutil.sml
      PPAbsyn*	      ElabData/syntax/ppabsyn.sml
      Bindings*	      ElabData/statenv/bindings.sml
      StaticEnv*      ElabData/statenv/statenv.sml
      Primop*         ElabData/prim/primop.sml
      Types*	      ElabData/types/types.sml
      BasicTypes*     ElabData/types/basictypes.sml
      Modules*	      ElabData/modules/modules.sml
      TypesUtil*      ElabData/types/typesutil.sml
      PPType*	      ElabData/types/pptype.sml

      ElabDebug*      Elaborator/elaborate/elabdebug.sml
      ElabUtil*	      Elaborator/elaborate/elabutil.sml
      MatchComp*      Elaborator/matchcomp/matchcomp.sml

      Formatting      [smlnj-lib/]PrettyPrint/src/formatting.sml
      PrintFormat     [smlnj-lib/]PrettyPrint/src/printformat.sml
      RedBlackMapFn   [smlnj-lib/]Util/...

      PLambda	      FLINT/plambda/plambda.sml
      Lty	      FLINT/kernel/lty.sml
      LtyDef	      FLINT/kernel/ltydef.sml
      LtyBasic	      FLINT/kernel/ltybasic.sml
      LtyExtern	      FLINT/kernel/ltyextern.sml
      TransTypes      FLINT/trans/transtypes.sml
      TransUtil	      FLINT/trans/transutil.sml
      LiteralToNum*   FLINT/trans/literal-to-num.sml

  transprim.sml
    < TransPrim
    > Primop*         ElabData/prim/primop.sml
      Types*	      ElabData/types/types.sml
      BasicTypes*     ElabData/types/basictypes.sml
      Target*	      Basics/compiler/target[32,64].sml
      ErrorMsg*	      Basics/errormsg/errormsg.sml
      Control.Print*  TopLevel/main/control.sml

      PLambda	      FLINT/plambda/plambda.sml
      Lty	      FLINT/kernel/lty.sml
      LtyDef	      FLINT/kernel/ltydef.sml
      LtyBasic	      FLINT/kernel/ltybasic.sml

      Formatting*     [smlnj-lib/]PrettyPrint/src/formatting.sml
      PrintFormat*    [smlnj-lib/]PrettyPrint/src/printformat.sml

  transtypes.sml
    < TRANSTYPES
      TransTypes
    > ErrorMsg*	      Basics/errormsg/errormsg.sml
      InvPath*	      ElabData/basics/sympaths.sml
      Access*         ElabData/basics/access.sml
      Types*	      ElabData/types/types.sml
      BasicTypes*     ElabData/types/basictypes.sml
      TypesUtil*      ElabData/types/typesutil.sml
      Modules*	      ElabData/modules/modules.sml
      EntityEnv*      ElabData/modules/entityenv.sml
      EntPathContext* ElabData/modules/epcontext.sml
      ModuleUtil*     ElabData/modules/moduleutil.sml
      StaticEnv*      ElabData/statenv/statenv.sml
      ElabDebug*      Elaborator/elaborate/elabdebug.sml
      EvalEntity*     Elaborator/modules/evalenv.sml
      Instantiate*    Elaborator/modules/instantiate.sml

      Lty	      FLINT/kernel/lty.sml
      LtyDef	      FLINT/kernel/ltydef.sml
      LtyBasic	      FLINT/kernel/ltybasic.sml
      LtyKernel	      FLINT/kernel/ltykernel.sml
      LtyExtern	      FLINT/kernel/ltyextern.sml
      PrimTyc	      FLINT/kernel/primtyc.sml
      FLINT_Control   FLINT/main/control.sml

  literal-to-num.sml    * uses CoreIntInf functionality *
    < LITERAL_TO_NUM
      LiteralToNum
    > CoreIntInf*     $smlnj/init/init.cmi : cm


FLINT/flint/
  chkflint.sml
    < CHKFLINT
      ChkFlint
    > ErrorMsg*	      Basics/errormsg/errormsg.sml
      Control_Print*  Basics/print/printcontrol.sml 
      Stats*	      Basics/stats/stats.sml 
      LambdaVar*      ElabData/basics/lambdavar.sml 
      Access*         ElabData/basics/access.sml
      Primop*         ElabData/prim/primop.sml

      PLambda	      FLINT/plambda/plambda.sml
      FLINT	      FLINT/flint/flint.sml
      PPFlint	      FLINT/flint/ppflint.sml
      Lty
      LtyKernel
      LtyDef
      LtyBasic
      LtyExtern
      FunRecMeta 
      PPLty

      Formatting
      PrintFormat

  flint.sig
    < FLINT [sig]
    > Access*
      LambdaVar*
      Primop*
      IntConst*
      RealConst*

      PLambda
      Lty
      FunRecMeta

  flint.sml
    < FLINT [str]
    > Access*
      LambdaVar*
      Primop*
      IntConst*
      RealConst*

      PLambda
      Lty
      FunRecMeta

  flintutil.sml
    < FLINTUTIL
      FlintUtil
    > ErrorMsg*
      LambdaVar*
      Access*
      Primop*

      PLambda
      FLINT
      Lty
      LtyDef
      LtyBasic
      LtyKernel 
      LtyExtern
      FunRecMeta 


  ppflint.sig
    < PPFLINT
    >

      PLambda
      FLINT
      FunRecMeta

      Formatting

  ppflint.sml
    < PPFlint
    > Symbol*
      LambdaVar*
      Primop*
      StringFormats*
      Control*

      PLambda
      FLINT
      FlintUtil
      Lty
      LtyDef
      FunRecMeta
      PPLty 

      Formatting*
      PrintFormat*

  tvarcvt.sml
    < TVARCVT
      TvarCvt
    > LambdaVar*
      Control*

      PLambda
      FLINT
      Lty
      LtyDef 
      LtyKernel
      LtyExtern
      FunRecMeta
      PPLty

FLINT/kernel/
  lty.sig
    <
    >

  lty.sml
    <
    >

  ltykernel.sig
    <
    >

  ltykernel.sml
    <
    >

  ltydef.sig
    <
    >

  ltydef.sml
    <
    >

  funrecmeta.sig
    <
    >

  funrecmeta.sml
    <
    >

  ltybasic.sig
    <
    >

  ltybasic.sml
    <
    >

  ltyextern.sig
    <
    >

  ltyextern.sml
    <
    >

  ltydict.sml
    <
    >

  primtyc.sig
    <
    >

  primtyc.sml
    <
    >

  ltykindchk.sml
    <
    >

  pplty.sml
    <
    >

FLINT/opt/
  fixfix.sml
    <
    >

  collect.sml
    <
    >

  fcontract.sml
    <
    >

  optutils.sml
    <
    >

  lcontract.sml
    <
    >

  recover.sml
    <
    >

  specialize.sml
    <
    >

  loopify.sml
    <
    >

  lift.sml
    <
    >

FLINT/reps/
  coerce.sml
    <
    >

  equal.sml
    <
    >

  reify.sml
    <
    >

  rttype.sml
    <
    >

  typeoper.sml
    <
    >

  wrapping.sml
    <
    >


* ---------------------------- Imports ---------------------------- *

(* Basis libaries *)
$smlnj/basis/basis.cm

(* smlnj-lib libraries *)
$smlnj/smlnj-lib/smlnj-lib.cm        (* smlnj-lib/Util *)
$smlnj/smlnj-lib/controls-lib.cm     (* smlnj-lib/Controls *)
$smlnj/smlnj-lib/prettyprint-lib.cm  (* smlnj-lib/PrettyPrint *)

$smlnj/init/init.cmi : cm            (* CoreIntInf *)
