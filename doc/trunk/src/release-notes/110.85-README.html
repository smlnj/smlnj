<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>SML/NJ 110.85 Release Notes</title>
<style type="text/css">
  body {
    font-size: 14pt;
  }
  div.smlnj-banner {
    font-weight: bold;
    font-size: 200%;
    text-align: center;
    margin-top: 1.5em;
    margin-bottom: 1.5em;
  }
  h3 {
    font-size: 140%;
  }
  dt.component {
    font-size: 120%;
    font-weight: bold;
  }
  dd {
    margin-left: 2em;
    margin-bottom: 0.5em;
  }
  ul.buglist {
    margin-left: 1em;
  }
  li {
    margin-bottom: 0.5em;
  }
  span.important {
    color: red;
    text-weight: bold;
  }
  span.tt {
    font-family: "Courier", monospace;
  }
  .code {
    font-family: "Courier", monospace;
    white-space: pre;
    color: darkblue;
  }
  span.kw {
    font-family: "Courier", monospace;
    font-weight: bold;
    color: darkgreen;
  }
  span.com {
    font-style: italic;
    color: indianred;
  }
  span.exe {
    font-weight: bold;
  }
  table.buglist {
    margin-left: 2em;
    font-size: 100%;
  }
  td.bugid {
    font-weight: bold;
    padding-right: 1em;
    padding-left: 0px;
    margin-left: 0px;
  }
  p.compact {
    margin-top: 0pt;
    margin-bottom: 0pt;
  }
  #support-table {
    margin-left: 2em;
    font-size: 100%;
  }
  #support-table th {
    text-align: left;
    padding-right: 1em;
    border-bottom: 2px solid black;
  }
  #support-table td {
    padding-right: 1em;
  }
</style>
</head>

<body>
<div class="smlnj-banner">
                       Standard ML of New Jersey
<br>
                          Version 110.85 NEWS
<br>
                           December 21, 2018
</div>

<hr>
<dl>
  <dt>SML/NJ HOME:</dt>
  <dd><a href="https://www.smlnj.org/index.html"><span class="tt">https://smlnj.org</span></a></dd>
  <dt>FILES:</dt>
  <dd><a href="https://smlnj.org/dist/working/110.85/index.html">
    <span class="tt">https://smlnj.org/dist/working/110.85/</span></a>
  </dd>
</dl>
<hr>

<h3>Summary:</h3>
<p>
  This release fixes a critical bug in the runtime system, as well has including
  some additional changes to the compiler.
<p>

<h3>Details:</h3>

<dl>
  <dt class="component">Installation</dt>
  <dd>
    <p>
      While the <a href="https://smlnj.org/dist/working/110.85/smlnj-x86-110.85.pkg">installer</a>
      for 110.85 works on macOS 10.14 Mojave, building from source requires some extra steps.
    </p>
    <p>
      We have added a new Makefile (<span class="tt">mk.x86-darwin18</span>)
      for the runtime system and modified the <span class="tt">config/install.sh</span>
      script to use this makefile when necessary.  This new makefile expects
      that the <span class="tt">MacOSX10.13.sdk</span> directory from <b>Xcode 9</b> has been
      copied into the <b>Xcode 10</b> SDKs directory. See the
      <a href="https://smlnj.org/dist/working/110.85/HISTORY.html">change log</a> for more
      details.
    </p>
  </dd>
  <dt class="component">SML/NJ Library</dt>
  <dd>
    <p>
      Added <span class="code">CharBufferPP</span> structure to the pretty-printing
      library.  This module can be used to generate strings from a pretty-printer.
    </p>
  </dd>
  <dt class="component">Compiler</dt>
  <dd>
    <p>
      A number of changes to internal representations as part of the preparation for
      supporting 64-bit targets.  See the <a href="https://smlnj.org/dist/working/110.85/HISTORY.html">
      change log</a> for details.
    </p>
    <p>
      The <span class="code">getPseudo</span> and <span class="code">setPseudo</span>
      functions were removed from the <span class="code">Unsafe</span> structure, since
      they were no longer supported by the code generator.
      We also removed the <span class="code">getpseudo</span>, <span class="code">setpseudo</span>,
      <span class="code">setmark</span>, and <span class="code">dispose</span> functions
      from the <span class="code">InlineT</span> structure (these are not visible to user code).
    </p>
  </dd>
</dl>

<h3>Bugs:</h3>
<p>
Here is a list of tracked bugs fixed (or closed) with this release, please see the
<a href="https://smlnj-gforge.cs.uchicago.edu/projects/smlnj-bugs/">bug tracker</a>
for more details.
</p>
<table class="buglist">
  <tr><td class="bugid">216</td><td>run-time system fatal error with large top-level value</td></tr>
<!--      <tr><td class="bugid">XXX</td><td>DESCRIPTION</td></tr> -->
</table>

<h3>Supported systems:</h3>
<blockquote>
<p>
We believe that SML/NJ will build and run on the following systems, but have only
tested some of them:
</p>
<div>
<table id="support-table">
  <tr><th>Architecture</th> <th>Operating System</th> <th>Status</th></tr>
  <tr><td>Power PC</td> <td>Mac OS X 10.5 (Leopard)</td> <td></td></tr>
  <tr><td></td> <td>AIX</td> <td></td></tr>
  <tr><td>&nbsp;</td> <td>&nbsp;</td></tr>
  <tr><td>Sparc</td> <td>Solaris</td> <td></td></tr>
  <tr><td></td> <td>Linux</td> <td></td></tr>
  <tr><td>&nbsp;</td> <td>&nbsp;</td></tr>
  <tr><td>x86</td> <td>Mac OS X 10.6 (Snow Leopard)</td> <td></td></tr>
  <tr><td></td> <td>Mac OS X 10.7 (Lion)</td> <td></td></tr>
  <tr><td></td> <td>Mac OS X 10.8 (Mountain Lion)</td> <td></td></tr>
  <tr><td></td> <td>Mac OS X 10.9 (Mavericks)</td> <td></td></tr>
  <tr><td></td> <td>Mac OS X 10.10 (Yosemite)</td> <td></td></tr>
  <tr><td></td> <td>Mac OS X 10.11 (El Capitan)</td> <td></td></tr>
  <tr><td></td> <td>macOS 10.12 (Sierra)</td> <td>Tested</td></tr>
  <tr><td></td> <td>macOS 10.13 (High Sierra)</td> <td>Tested</td></tr>
  <tr><td></td> <td>macOS 10.14 (Mojave)</td> <td>Tested (see note below)</td></tr>
  <tr><td></td> <td>Ubuntu 16.04.3 LTS</td> <td>Tested</td></tr>
  <tr><td></td> <td>Other Linux variants</td><td></td></tr>
  <tr><td></td> <td>BSD variants</td><td></td></tr>
  <tr><td></td> <td>Windows 7</td> <td></td></tr>
  <tr><td></td> <td>Windows 10</td> <td>Tested</td></tr>
  <tr><td></td> <td>Cygwin (32-bit)&nbsp;</td></tr>
</table>
</div>
</blockquote>
<p>
Apple is in the process of deprecating 32-bit support in macOS.
With macOS 10.14 Mojave, compiling 32-bit applications, such as the SML/NJ
runtime system, requires using an older SDK.
The SML/NJ <a href="https://smlnj.org/dist/working/110.85/smlnj-x86-110.85.pkg">
installer</a>, however, works without issue on macOS 10.14 Mojave.
</p>
<p>
We have been working on 64-bit support since 110.82 we expect to have it in place
before the release of macOS 10.15.
</p>

</body>
</html>
